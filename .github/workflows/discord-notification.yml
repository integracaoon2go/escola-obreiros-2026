name: Auto Discord Channels

on:
  push:
    branches: [main]
    paths: ['modulo-*.html', 'index.html']
  schedule:
    # Segunda 9h - Avisos Oficiais
    - cron: '0 12 * * 1'
    # Segunda 10h - Mesa de Exegese
    - cron: '0 13 * * 1'
    # Quarta 9h - DÃºvidas da Aula
    - cron: '0 12 * * 3'
    # Quinta 9h - Desafios da Semana
    - cron: '0 12 * * 4'
    # Sexta 9h - Materiais dos MÃ³dulos
    - cron: '0 12 * * 5'
    # Domingo 10h - Geral VNC
    - cron: '0 13 * * 0'

jobs:
  discord-notifications:
    runs-on: ubuntu-latest
    steps:
      # SEGUNDA 9h - AVISOS OFICIAIS
      - name: Enviar para #avisos-oficiais
        if: github.event.schedule == '0 12 * * 1'
        run: |
          curl -X POST ${{ secrets.WEBHOOK_AVISOS }} \
            -H 'Content-Type: application/json' \
            -d '{
              "content": "ğŸ“¢ **CONVOCAÃ‡ÃƒO DA SEMANA**",
              "embeds": [{
                "title": "ğŸ“ Escola de Obreiros - Semana ComeÃ§ou",
                "description": "Bem-vindo Ã  nova semana de aprendizado!",
                "color": 3092790,
                "fields": [
                  {"name": "ğŸ“… Dia", "value": "Segunda-feira", "inline": true},
                  {"name": "â° HorÃ¡rio", "value": "Sempre Ã s 9h", "inline": true},
                  {"name": "ğŸ‘¨â€ğŸ« ResponsÃ¡vel", "value": "Pastor Osvaldo", "inline": false}
                ]
              }]
            }'

      # SEGUNDA 10h - MESA DE EXEGESE
      - name: Enviar para #mesa-de-exegese
        if: github.event.schedule == '0 13 * * 1'
        run: |
          curl -X POST ${{ secrets.WEBHOOK_MESA }} \
            -H 'Content-Type: application/json' \
            -d '{
              "content": "ğŸ™ï¸ **PODCAST: MESA DE EXEGESE**",
              "embeds": [{
                "title": "ğŸ“– RevisÃ£o BÃ­blica da Semana",
                "description": "AnÃ¡lise profunda do mÃ³dulo em andamento. OuÃ§a agora!",
                "color": 3092790,
                "fields": [
                  {"name": "ğŸ§ Formato", "value": "Podcast", "inline": true},
                  {"name": "â±ï¸ DuraÃ§Ã£o", "value": "~30 min", "inline": true}
                ]
              }]
            }'

      # QUARTA 9h - DÃšVIDAS DA AULA
      - name: Enviar para #duvidas-da-aula
        if: github.event.schedule == '0 12 * * 3'
        run: |
          curl -X POST ${{ secrets.WEBHOOK_DUVIDAS }} \
            -H 'Content-Type: application/json' \
            -d '{
              "content": "ğŸ™‹â€â™‚ï¸ **PLANTÃƒO DE DÃšVIDAS ABERTO**",
              "embeds": [{
                "title": "â“ Tire suas dÃºvidas agora!",
                "description": "Nossos mentores estÃ£o prontos para ajudar. Escreva sua pergunta!",
                "color": 3092790,
                "fields": [
                  {"name": "ğŸ• HorÃ¡rio", "value": "Quarta-feira Ã s 9h", "inline": true},
                  {"name": "ğŸ’¬ Canal", "value": "Aqui neste chat", "inline": true}
                ]
              }]
            }'

      # QUINTA 9h - DESAFIOS DA SEMANA
      - name: Enviar para #desafios-da-semana
        if: github.event.schedule == '0 12 * * 4'
        run: |
          curl -X POST ${{ secrets.WEBHOOK_DESAFIOS }} \
            -H 'Content-Type: application/json' \
            -d '{
              "content": "ğŸ† **DESAFIO PRÃTICO DA SEMANA**",
              "embeds": [{
                "title": "ğŸ’ª Coloque em PrÃ¡tica o Aprendizado",
                "description": "Seu desafio estÃ¡ pronto! Aceite e comece agora.",
                "color": 3092790,
                "fields": [
                  {"name": "ğŸ“ Tipo", "value": "Desafio PrÃ¡tico", "inline": true},
                  {"name": "ğŸ¯ Dificuldade", "value": "Progressiva", "inline": true},
                  {"name": "ğŸ† PrÃªmio", "value": "Pontos + Role", "inline": false}
                ]
              }]
            }'

      # SEXTA 9h - MATERIAIS DOS MÃ“DULOS
      - name: Enviar para #materiais-dos-modulos
        if: github.event.schedule == '0 12 * * 5'
        run: |
          curl -X POST ${{ secrets.WEBHOOK_MATERIAIS }} \
            -H 'Content-Type: application/json' \
            -d '{
              "content": "ğŸ“š **APOSTILA SEMANAL DISPONÃVEL**",
              "embeds": [{
                "title": "âœ… Novo Material Liberado",
                "description": "Confira a apostila e os materiais desta semana!",
                "color": 3092790,
                "fields": [
                  {"name": "ğŸ“– Formato", "value": "PDF + HTML", "inline": true},
                  {"name": "ğŸ“¥ Download", "value": "Clique no link acima", "inline": true},
                  {"name": "ğŸ’¾ Salve", "value": "Para estudar offline", "inline": false}
                ]
              }]
            }'

      # DOMINGO 10h - GERAL VNC
      - name: Enviar para #geral-vnc
        if: github.event.schedule == '0 13 * * 0'
        run: |
          curl -X POST ${{ secrets.WEBHOOK_GERAL }} \
            -H 'Content-Type: application/json' \
            -d '{
              "content": "ğŸ“¸ **COMUNHÃƒO E FOTOS DA SEMANA**",
              "embeds": [{
                "title": "ğŸ™ Compartilhe seus Momentos",
                "description": "Poste fotos e compartilhe experiÃªncias desta semana!",
                "color": 3092790,
                "fields": [
                  {"name": "ğŸ“· O que postar?", "value": "Fotos da comunidade, celebraÃ§Ãµes, momentos especiais", "inline": false},
                  {"name": "â¤ï¸ Tema", "value": "ComunhÃ£o e unidade", "inline": false}
                ]
              }]
            }'
